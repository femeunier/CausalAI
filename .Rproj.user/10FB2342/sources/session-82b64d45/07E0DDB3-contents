library(ncdf4)
library(reshape2)

nc <- nc_open("/home/femeunier/Downloads/cru_ts4.09.2021.2024.pre.dat.nc")
data <- ncvar_get(nc,"stn")
lats <- ncvar_get(nc,"lat")
lons <- ncvar_get(nc,"lon")
df <- melt(data) %>%
  mutate(lon = lons[Var1],
         lat = lats[Var2]) %>%
  filter(!is.na(value)) %>%
  filter(value > 0)

hist(df$value)
